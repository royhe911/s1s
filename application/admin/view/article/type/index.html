<style>
    .bs-bars {
        width: 100px;
        line-height: 36px;
        background-color: #34c191;
        border-radius: 4px;
    }
    .fixed-table-pagination {
        text-align: center;
    }
     .fixed-table-pagination .active span{
        background-color: #34c191;
        border-color:#34c191;
        color: #fff;
    }
    .fixed-table-pagination a{
        color: #34c191 !important;
    }
    .fixed-table-pagination li {
        width: 36px;
        height: 36px;
        background-color: #ffffff;
        /* border: solid 1px #dddddd; */
    }
</style>
<div class="panel panel-default panel-intro">
    <!-- <div class="panel-heading row" style="padding-top:0;padding-left: 30px;color: #999;font-size: 12px;">
        <div class="lf"><i class="fa fa-home" style="font-size: 14px;"></i></div>
        <div class="panel-lead lf" style="margin-left: 7px;">资讯管理 ></div>
        <div class="panel-lead lf" style="margin-left: 7px; color: #34c191">分类列表</div>
    </div> -->
    <div class="panel-heading row" style="padding-top:0;color: #999;font-size: 12px; line-height: 50px; background-color: transparent">
        <div style="background-color: #e8edf0;width: 100%; height: 50px;padding-left: 15px">
            <div class="lf">
                <i class="fa fa-home" style="font-size: 14px;"></i>
            </div>
            <div class="panel-lead lf" style="margin: 0px;">资讯管理&nbsp;&nbsp;&nbsp;> </div>
            <div class="panel-lead lf pl" style="margin: 0px;color: #34c191;">&nbsp;&nbsp;&nbsp;分类列表</div>
        </div>
    </div>
    <div class="panel-body">
        <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade active in" id="one">
                <div class="widget-body no-padding">
                    <div class="bootstrap-table">
                        <div class="fixed-table-toolbar">
                            <div class="row clearfix" style="margin:10px 0 0 0;">
                                <div class="pull-left">
                                    <div id="toolbar" class="toolbar" style="position: relative;">
                                        <a href="javascript:;" onclick="layer_open('添加资讯分类', '/article/type/add',{w:'350px',h:'220px'})" class="btn btn-success btn-add bs-bars-com" title="添加资讯分类" > 添加资讯分类</a>
                                    </div>
                                </div>
                                <div class="num pull-right">
	                            	<select class="pull-left form-control title-input num_list" style="width:120px;border-color:#34C191;">
	                                	<option value="0">查看条数</option>
	                                	{volist name='page_list' id='vo'}
	                                	<option value="{$vo}" {if $Think.session.cur_limit eq $vo}selected{/if}>{$vo}</option>
	                                	{/volist}
	                                </select>
	                            </div>                                   
                            </div>
                            <p style="float: right;font-size: 12px;padding: 8px; margin: 0">共计
                                <span style="color: #34c191;"><?php echo count($list);?></span> 个资讯分类</p>
                        </div>
                        <div class="fixed-table-container" style="padding-bottom: 0px;">
                            <div class="fixed-table-header" style="display: none;">
                                <table></table>
                            </div>
                            <div class="fixed-table-body">

                                <table id="table" class="table table-striped table-bordered table-hover" data-operate-edit="1" data-operate-del="1" width="100%">
                                    <thead>
                                    <tr style="background-color: #e8f7f2;">
                                        <th class="col-xs-4" style="text-align: center; vertical-align: middle; " data-field="name">
                                            <div class="th-inner ">分类名称</div>
                                            <div class="fht-cell"></div>
                                        </th>
                                        <th class="col-xs-4" style="text-align: center; vertical-align: middle; " data-field="sort">
                                            <div class="th-inner ">排序</div>
                                            <div class="fht-cell"></div>
                                        </th>
                                        <th class="col-xs-4" style="text-align: center; vertical-align: middle; " data-field="operate">
                                            <div class="th-inner ">操作</div>
                                            <div class="fht-cell"></div>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody data-listidx="0">
                                    {volist name='list' id='vo'}
                                    <tr class="ac-tr">
                                        <td style="text-align: center; vertical-align: middle; ">{$vo.name}</td>
                                        <td style="text-align: center; vertical-align: middle; ">
                                            <input type="text" class="input-text ac-number ac-sort" id="{$vo.id}" data-id="{$vo.id}" maxlength="4" value="{$vo.sort ?? 0}" data-val="{$vo.sort ?? 0}" style="width: 100px;height: 36px;border-radius: 4px;border: solid 1px #dddddd; text-align: center;">
                                        </td>
                                        <td style="text-align: center; vertical-align: middle; ">
                                            <a href="javascript:;" style="color: #9f9f9f; margin-right:80px; display: inline-block" onclick="layer_open('编辑', '/article/type/edit/ids/{$vo.id}',{w:'350px',h:'220px'})" class="albumCC" title="编辑" data-table-id="table" data-field-index="9" data-row-index="0" data-button-index="0"><i class="iconfont icon-edit"></i></a>
                                            <a href="javascript:;" style="color: #9f9f9f; margin-right:5px; display: inline-block" onclick="del({$vo.id},{is_ajax:true,parent_item:$(this).parents('.ac-tr')});" class="albumCC" title="删除" data-table-id="table" data-field-index="9" data-row-index="30" data-button-index="2"><i class="iconfont icon-shanchu"></i></i></a>                                            
                                        </td>
                                    </tr>
                                    {/volist}
                                    </tbody>
                                </table>
                            </div>
                            <div class="fixed-table-footer" style="display: none;">
                                <table>
                                    <tbody>
                                    <tr></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    (function () {
    	//切换显示条数
		$('.num_list').change(function(){
        	var value=$(this).find('option:selected').val();        	                              	        	
        	location.href = '/article/type/index?cur_limit=' + value;        	    
        })
    	
        $("#myTabContent .ac-number").on("input", function () {
            fun.inputNumber($(this));
        });
        var obj = {};
        obj.url = "/article/type/edit_sort";
        sort_edit(obj);
    })();
    
    function del(ids,obj) {
        if (ids == 0) {
            ids = get_select_all();
        }
        if (ids == '') {
            layer.alert('请选择要操作的分类', {icon: 5});
            return false;
        }
        layer.confirm('确认删除分类吗？', {icon: 3, title:'提示'}, function(){
            $.post('/article/type/delete', {ids: ids}, function (data) {
                if (data.code == 1) {
                    layer.msg(data.msg, {
                        time: 1000 //1秒关闭（如果不配置，默认是3秒）
                    }, function () {
                        if(obj&&obj.is_ajax) {
                            var parent_item= obj.parent_item;
                            parent_item.remove();
                        }else{
                            window.parent.location.reload();
                        }
                    });
                } else {
                    layer.alert(data.msg, {icon: 5});
                }
            }, 'json')
        });
    }
</script>