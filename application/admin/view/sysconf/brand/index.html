<style>
    .fixed-table-pagination {
        text-align: center;
    }
     .fixed-table-pagination .active span{
        background-color: #34c191;
        border-color:#34c191;
        color: #fff;
    }
    .fixed-table-pagination a{
        color: #34c191 !important;
    }
    .fixed-table-pagination li {
        width: 36px;
        height: 36px;
        background-color: #ffffff;
        /* border: solid 1px #dddddd; */
    }
</style>
<div class="panel panel-default panel-intro">
    <div class="panel-heading row" style="padding-top:0;color: #999;font-size: 12px; line-height: 50px; background-color: transparent">
        <!-- <div class="panel-lead"><em>门店分类管理</em></div> -->
        <div style="background-color: #e8edf0;width: 100%; height: 50px;padding-left: 15px">
            <div class="lf">
                <i class="fa fa-home" style="font-size: 14px;"></i>
            </div>
            <div class="panel-lead lf" style="margin: 0px;">系统配置&nbsp;&nbsp;&nbsp;> </div>
            <div class="panel-lead lf pl" style="margin: 0px;color: #34c191;">&nbsp;&nbsp;&nbsp;品牌管理</div>
        </div>
    </div>
    <div class="panel-body">
        <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade active in" id="one">
                <div class="widget-body no-padding">
                    <div class="bootstrap-table">
                        <div class="clearfix">
                            <div class="fixed-table-toolbar">
                                <form id="edit-form" class="form-horizontal pull-left" role="form" data-toggle="validator" method="get" action="">
                                    <div class="row"  style="margin:0;">
                                        <div style="float: left;width: 200px;margin-right: 5px; margin-right: 5px" >
                                            <input class="form-control title-input" name="keyword" style="width: 200px;" type="text" value="{$Request.get.keyword ?? ''}" placeholder="品牌名称">
                                            <input class="form-control title-input" name="status" style="width: 200px;" type="hidden" value="{$status ?? -1}">
                                        </div>
                                        <div style="float: left;width: 100px;">
                                            <button type="submit" class="btn btn-success btn-ok btn-embossed " style="width: 100px; height: 36px; background-color: #34c191">搜 索</button>
                                        </div>
                                    </div>
                                </form>
                                <div class="num pull-right" style="margin-left:10px;">
	                            	<select class="pull-left form-control title-input num_list" style="width:110px;border-color:#34C191;">
	                                	<option value="0">查看条数</option>
	                                	{volist name='page_list' id='vo'}
	                                	<option value="{$vo}" {if $Think.session.cur_limit eq $vo}selected{/if}>{$vo}</option>
	                                	{/volist}
	                                </select>
	                            </div>   
                        	</div>
                        	<div class="row pull-left" style="margin:0;">
                                <div class=" pull-right" style="width: 100%;">
                                    <div id="toolbar" class="toolbar clearfix" style="position: relative;">
                                        <a href="javascript:;" data-isStop="0" data-id="0" class="ac-is-stop btn btn-success btn-status-disable btn-disabled disabled bs-bars-com" style="margin:0 5px 5px 5px;float: right; padding: 0" title="禁用">批量禁用</a>
                                        <a href="javascript:;" data-isStop="1" data-id="0" class="ac-is-stop btn btn-success btn-status-enable btn-disabled disabled bs-bars-com" style="margin:0 5px 5px 5px;float: right; padding: 0" title="启用">批量启用</a>
                                        <a href="javascript:;" onclick="layer_open('添加品牌', '/sysconf/brand/add',{w:'400px',h:'432px'})" class="btn btn-success btn-add bs-bars-com" style="margin:0 5px 5px 5px;float: right; padding: 0;background-color: #37c6c0" title="添加">添加品牌</a>
                                    </div>
                                </div>
                            </div>
                            <p style="float: right;font-size: 12px;padding: 8px; margin: 15px 0 0 0;">共计
                                <span style="color: #34c191;">{$list->total()}</span> 个品牌</p>
                        </div>
                        <div class="fixed-table-container row" style="margin: 0;padding-bottom: 0;">
                            <div class="fixed-table-header" style="display: none;">
                                <table></table>
                            </div>
                            <div class="fixed-table-body">
                                <table id="table" class="table table-striped table-bordered table-hover" data-operate-edit="1" data-operate-del="1" width="100%">
                                    <thead>
                                    <tr style="background-color: #e8f7f2;">
                                        <th class="bs-checkbox col-xs-1" style="text-align: center; vertical-align: middle;width: 50px; " data-field="0">
                                            <div class="th-inner "><input name="btSelectAll" id="btSelectAll" type="checkbox" disabled="disabled"></div>
                                            <div class="fht-cell"></div>
                                        </th>
                                        <th class="col-xs-1" style="text-align: center; vertical-align: middle;width: 50px;" data-field="id">
                                            <div class="th-inner ">Id</div>
                                            <div class="fht-cell"></div>
                                        </th>
                                        <th class="col-xs-2" style="text-align: center; vertical-align: middle; " data-field="name">
                                            <div class="th-inner ">品牌名称</div>
                                            <div class="fht-cell"></div>
                                        </th>
                                        <th class="col-xs-6" style="text-align: center; vertical-align: middle; " data-field="nickname">
                                            <div class="th-inner ">品牌图片</div>
                                            <div class="fht-cell"></div>
                                        </th>
                                        <th class="col-xs-1" style="text-align: center; vertical-align: middle; width: 120px;" data-field="status">
                                            <div class="th-inner ">状态</div>
                                            <div class="fht-cell"></div>
                                        </th>
                                        <th class="col-xs-1" style="text-align: center; vertical-align: middle;width: 120px; " data-field="operate">
                                            <div class="th-inner ">操作</div>
                                            <div class="fht-cell"></div>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody data-listidx="0">
                                    {volist name='list' id='vo'}
                                    <tr class="delt">
                                        <td class="bs-checkbox ">
                                            <input data-index="{$i-1}" value="{$vo.id}" name="btSelectItem" type="checkbox" >
                                        </td>
                                        <td style="text-align: center; vertical-align: middle;" class='input'>{$vo.id}</td>
                                        <td style="text-align: center; vertical-align: middle; ">{$vo.name}</td>
                                        <td style="text-align: center; vertical-align: middle; ">
                                            <img style="max-height: 60px;" src="{$Think.config.qiniu.domain}/{$vo.logo}">
                                        </td>
                                        <td style="text-align: center; vertical-align: middle;  width: 120px;">
                                            {if $vo.status eq 1}
                                            <a class="btn-change text-success ac-is-stop" href="javascript:;" data-isStop="0" data-id="{$vo.id}" title="禁用">
                                                <i class="fa fa-toggle-on fa-2x" style="color: #18bc9c;"></i>
                                            </a>
                                            {else}
                                            <a class="btn-change text-success ac-is-stop" href="javascript:;" data-isStop="1" data-id="{$vo.id}" title="启用">
                                                <i class="fa fa-toggle-off fa-2x" style="color: #18bc9c;"></i>
                                            </a>
                                            {/if}
                                        </td>
                                        <td style="text-align: center; vertical-align: middle;  width: 120px;">
                                            <!-- <a href="javascript:;" onclick="layer_open('编辑', '/sysconf/brand/edit/ids/{$vo.id}',{w:'400px',h:'432px'})" class=" albumCC" style="margin-right: 80px !important" title="编辑" data-table-id="table" data-field-index="9" data-row-index="0" data-button-index="0"><i class="iconfont icon-edit"></i></a> -->
                                            <a href="javascript:;" data-url="/sysconf/brand/edit/ids/{$vo.id}" class="<?php echo ($vo['status'] == 1) ? 'editClick': 'btn-s';?> btn-editone btn-color editCC"
                                                title="编辑" data-table-id="table" data-field-index="9" data-row-index="0" data-button-index="0" style="margin-right: 5px;">
                                                <i class="iconfont icon-edit"></i>
                                            </a>
                                            <a href="javascript:;"  class=" albumCC del" data-id='{$vo.id}' title="删除" data-table-id="table"  data-field-index="9" data-row-index="0" data-button-index="0"><i class="iconfont icon-shanchu"></i></a>
                                        </td>
                                    </tr>
                                    {/volist}
                                    </tbody>
                                </table>
                            </div>
                            <div class="fixed-table-footer" style="display: none;">
                                <table>
                                    <tbody>
                                    <tr></tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="fixed-table-pagination">{$list->render()|raw}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
	
    (function () {
    	$('#btSelectAll').attr('disabled',false)
        var prevent_more_click = true;
        $(".ac-is-stop").on("click", function () {
            if(prevent_more_click) {
                var obj = {
                    url: '/sysconf/brand/edit_status',
                    info_msg: '请选择要操作的品牌'
                };
                obj.os_this = $(this);
                obj.is_stop = $(this).attr("data-isStop");
                obj.id = $(this).attr("data-id");
                is_stop(obj);
                prevent_more_click = false;
                setTimeout(function () {
                    prevent_more_click = true;
                }, 600);
                 if (obj.is_stop == 1) {
                    $(this).parent().next().children('.btn-editone').removeClass('btn-s').addClass('editClick')
                } else {
                    $(this).parent().next().children('.btn-editone').removeClass('editClick').addClass('btn-s')
                    // $('this').css('backgroundColor', '#34c191')
                }
            }
        });
        $(document).on('click', '.btn-s', function () {
            var url = $(this).attr('data-url');
            layer_open('编辑', url, { w: '400px', h: '432px' })
        })
        $('.del').on('click',function(evnet){
            let that = $(this);
            $.ajax({
                url:'/sysconf/brand/delete',
                type:'POST',
                data:{
                    ids: $(this).attr('data-id')
                },
                success:function(d){
                    if(d.code==1){
                        layer.msg(d.msg)
                        that.parent().parent().remove();
                        setTimeout(function(){
                            window.location.reload();
                        }, 500);
                    }else {
                        layer.msg(d.msg)
                    }
                }
            })
        })
        //切换显示条数
		$('.num_list').change(function(){
        	var value=$(this).find('option:selected').val();        	                                      	  	
        	var keyword=$('input[name="keyword"]').val();
        	var status=$('input[name="status"]').val();
        	location.href = '/sysconf/brand/index?cur_limit=' + value+'&keyword='+keyword+'&status='+status;        	    
        })
        
    })();
</script>