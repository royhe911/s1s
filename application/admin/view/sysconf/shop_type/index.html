<!-- <link rel="stylesheet" type="text/css" href="../../../../../public/assets/css/" /> -->
<div class="panel panel-default panel-intro">
    <!-- <div class="panel-heading"> -->
    <div class="panel-heading row" style="padding-top:0;color: #999;font-size: 12px; line-height: 50px; background-color: transparent">
        <!-- <div class="panel-lead"><em>门店分类管理</em></div> -->
        <div style="background-color: #e8edf0;width: 100%; height: 50px;padding-left: 15px">
            <div class="lf" >
                <i class="fa fa-home" style="font-size: 14px;"></i>
            </div>
            <div class="panel-lead lf" style="margin: 0px;">系统配置&nbsp;&nbsp;&nbsp;> </div>
            <div class="panel-lead lf pl" style="margin: 0px;color: #34c191;">&nbsp;&nbsp;&nbsp;门店分类管理</div>
        </div>
    </div>
    <div class="panel-body">
        <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade active in" id="one">
                <div class="widget-body no-padding">
                    <div class="bootstrap-table">
                        <div class="fixed-table-toolbar clearfix" style="margin-top:10px;">
                            <div class=" pull-right" >
                                <div id="toolbar" class="toolbar" style="position: relative;">
                                    <a href="javascript:;" onclick="layer_open('添加门店分类', '/sysconf/shop_type/add',{w:'400px',h:'314px'}) " class="btn btn-success btn-add bs-bars-com" style="margin: 0;width: 100px;line-height: 36px;"  title="添加门店分类">添加门店分类</a>
                                </div>
                            </div>                            
                        </div>
                        <p style="float: right;font-size: 12px;padding: 8px; margin: 0">共计
                            <span style="color: #34c191;"><?php echo count($list);?></span> 个门店分类</p>
                        <div class="fixed-table-container" style="padding-bottom: 0px;">
                            <div class="fixed-table-header" style="display: none;">
                                <table></table>
                            </div>
                            <div class="fixed-table-body">

                                <table id="table" class="table table-striped table-bordered table-hover" data-operate-edit="1" data-operate-del="1" width="100%">
                                    <thead>
                                    <tr style="background-color: #e8f7f2">
                                        <th style="text-align: center; vertical-align: middle; " data-field="name">
                                            <div class="th-inner ">分类名称</div>
                                            <div class="fht-cell"></div>
                                        </th>
                                        <th style="text-align: center; vertical-align: middle; " data-field="icon">
                                            <div class="th-inner ">分类图标</div>
                                            <div class="fht-cell"></div>
                                        </th>
                                        <th style="text-align: center; vertical-align: middle; " data-field="sort">
                                            <div class="th-inner ">排序</div>
                                            <div class="fht-cell"></div>
                                        </th>
                                        <th style="text-align: center; vertical-align: middle; " data-field="operate">
                                            <div class="th-inner ">操作</div>
                                            <div class="fht-cell"></div>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody data-listidx="0">
                                    {volist name='list' id='vo'}
                                    <tr class="ac-tr">
                                        <td style="text-align: center; vertical-align: middle; ">{$vo.name}</td>
                                        <td style="text-align: center; vertical-align: middle; ">
                                            <img style="max-height: 60px;" src="{$Think.config.qiniu.domain}/{$vo.icon}">
                                        </td>
                                        <td style="text-align: center; vertical-align: middle; ">
                                            <input type="text" class="input-text ac-sort" id="{$vo.id}" maxlength="4" data-id="{$vo.id}" value="{$vo.sort ?? 0}" data-val="{$vo.sort ?? 0}" style="width: 100px;height: 36px; border-radius: 4px;border:1px solid #ddd;text-align: center">
                                        </td>
                                        <td style="text-align: center; vertical-align: middle; ">
                                            <a href="javascript:;" onclick="layer_open('编辑', '/sysconf/shop_type/edit/ids/{$vo.id}',{w:'400px',h:'314px'})" class=" albumCC" style="margin-right: 80px !important" title="编辑" data-table-id="table" data-field-index="9" data-row-index="0" data-button-index="0"><i class="iconfont icon-edit"></i></a>
                                            <a href="javascript:;" onclick="del({$vo.id});" class=" albumCC" title="删除" data-table-id="table" data-field-index="9" data-row-index="30" data-button-index="2"><i class="iconfont icon-shanchu"></i></a>
                                        </td>
                                    </tr>
                                    {/volist}
                                    </tbody>
                                </table>
                            </div>
                            <div class="fixed-table-footer" style="display: none;">
                                <table>
                                    <tbody>
                                    <tr></tr>
                                    </tbody>
                                </table>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
	
    (function () {
        var obj = {};
        obj.url = "/sysconf/shop_type/edit_sort";
        sort_edit(obj);
        $(".input-text").on("input", function () {
            fun.inputNumber($(this));
        });
    })();


    function del(ids) {
        if (ids == 0) {
            ids = get_select_all();
        }
        if (ids == '') {
            layer.msg('请选择要操作的分类');
            return false;
        }
        $.post('/sysconf/shop_type/delete', {ids: ids}, function (data) {
            if (data.code == 1) {
                layer.msg(data.msg, {
                    time: 2000 //2秒关闭（如果不配置，默认是3秒）
                }, function () {
                    window.parent.location.reload();
                });
            } else {
                layer.msg(data.msg);
            }
        }, 'json')
    }
</script>